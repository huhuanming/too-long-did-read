---
---

<div id="lang-toggle" class="inline-flex text-sm rounded-lg overflow-hidden border border-zinc-800 bg-surface-2">
  <button data-lang="en" class="px-3 py-1.5 transition-all">EN</button>
  <button data-lang="zh" class="px-3 py-1.5 transition-all">中文</button>
  <button data-lang="both" class="px-3 py-1.5 transition-all">Both</button>
</div>

<script>
  function initLangToggle() {
    const buttons = document.querySelectorAll('#lang-toggle button');
    const enSection = document.getElementById('content-en');
    const zhSection = document.getElementById('content-zh');

    function setLang(lang: string) {
      buttons.forEach((btn) => {
        const el = btn as HTMLElement;
        const isActive = el.dataset.lang === lang;
        if (isActive) {
          el.className = 'px-3 py-1.5 transition-all bg-violet-600 text-white text-sm font-medium';
        } else {
          el.className = 'px-3 py-1.5 transition-all text-zinc-400 hover:text-zinc-200 text-sm';
        }
      });

      if (enSection && zhSection) {
        enSection.style.display = lang === 'zh' ? 'none' : '';
        zhSection.style.display = lang === 'en' ? 'none' : '';
      }

      localStorage.setItem('preferred-lang', lang);
    }

    const stored = localStorage.getItem('preferred-lang') || 'en';
    setLang(stored);

    buttons.forEach((btn) => {
      btn.addEventListener('click', () => setLang((btn as HTMLElement).dataset.lang || 'en'));
    });
  }

  document.addEventListener('content-split-done', initLangToggle);
</script>
